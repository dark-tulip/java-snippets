## –†–µ–∑—é–º–µ –ø–æ —Ä–∞–∑–±–æ—Ä—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ `HikariCP –∏ PGbouncer`
–†–∞–∑–æ–±—Ä–∞–ª–∏—Å—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ `HikariCP` –∏ PGbouncer –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ –Ω–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã:

### 0. –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

- —É –Ω–∞—Å –µ—Å—Ç—å `HikariCP` –∏ `pgBouncer` –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥—É–ª–∏—Ä—É—é—Ç connection pool-a–º–∏ —Å—Ä–µ–¥–∏ –Ω–∞—à–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- –ø—Ä–æ–±–ª–µ–º–∞: –Ω–µ—è–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –≤ –≥—Ä–∞—Ñ–∞–Ω–µ. –°–∫–∞—á—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ–≤

–ö–∞–∂–¥—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –æ–±–ª–∞–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø—Ä–æ–ø–µ—Ä—Ç—è–º–∏ —Ö–∏–∫–∞—Ä–∏
```properties
core.dao.primary-db-hikari-enabled=true
core.dao.primary-db-hikari-max-pool-size=10
core.dao.primary-db-hikari-min-idle=1
core.dao.primary-db-hikari-idle-timeout=300000
```
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç: 
- –¥–µ—Ä–∂–∏–º –º–∏–Ω–∏–º—É–º –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ —Ä–µ–ø–ª–∏–∫—É
- –ü—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º—Å—è –¥–æ 10
- `idleTimeout=300000` ‚Üí  –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç.

---

## –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1

**–ö–∞–∫ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ?**


- !–ù—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
  
```properties
core.dao.primary-db-hikari-max-pool-size=10
core.dao.primary-db-hikari-min-idle=5
core.dao.primary-db-hikari-idle-timeout=600000  # 10 –º–∏–Ω—É—Ç
core.dao.primary-db-hikari-keepalive-time=300000 # 5 –º–∏–Ω—É—Ç
core.dao.primary-db-hikari-connection-timeout=30000 # 30 —Å–µ–∫—É–Ω–¥
```

- `minimumIdle=5` ‚Äì –î–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 5 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Ä–µ–∑–∫–æ–≥–æ —É–º–µ–Ω—å—à–µ–Ω–∏—è)
- `idleTimeout=600000` (10 –º–∏–Ω—É—Ç) ‚Äì –î–æ–ª—å—à–µ –¥–µ—Ä–∂–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ—Å—Ç–æ–µ
- `keepaliveTime=300000` ‚Äì –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ó–∞—á–µ–º –º–µ–Ω—è—Ç—å –≤—Å–µ —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (`idle-timeout, keepalive-time, connection-timeout`)?**

> –î–∞, –≤ –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ `idle-timeout`, –Ω–æ –µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç `PGbouncer + HikariCP`, —Ç–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

üîë –†–∞–∑–±–µ—Ä—ë–º –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∏ –µ–≥–æ —Ä–æ–ª—å:
#### 1. `idleTimeout` (–ø—Ä–æ—Å—Ç–æ–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)

- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –¥–æ–ª–≥–æ HikariCP –º–æ–∂–µ—Ç –¥–µ—Ä–∂–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –ø—É–ª–µ.
- –ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç –¥–æ–ª—å—à–µ idleTimeout, –æ–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.
- –ï—Å–ª–∏ PGbouncer –≤ transaction —Ä–µ–∂–∏–º–µ, –æ–Ω –º–æ–∂–µ—Ç –æ—Ç–¥–∞—Ç—å —ç—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥—Ä—É–≥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É, –∏ —Ç–æ–≥–¥–∞ HikariCP –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

üìå –ü—Ä–æ–±–ª–µ–º–∞, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–ª—å–∫–æ idleTimeout:

- –ï—Å–ª–∏ `PGbouncer` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –Ω—ë–º –∂–∏–≤—É—Ç –º–µ–Ω—å—à–µ (server_idle_timeout = 300), —Ç–æ `PostgreSQL` –∑–∞–∫—Ä–æ–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–Ω—å—à–µ, —á–µ–º `HikariCP`
- –≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–∞–º `"Connection closed by server" –∏–ª–∏ "broken pipe"`, –ø–æ—Ç–æ–º—É —á—Ç–æ `HikariCP` –±—É–¥–µ—Ç –¥—É–º–∞—Ç—å, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –µ—â—ë —Ä–∞–±–æ—á–µ–µ.

#### 2. `keepaliveTime` (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)

- –†–∞–∑ –≤ `N` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ `HikariCP` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `SELECT 1` –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, —á—Ç–æ–±—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ—Å—å.
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ PGbouncer (–µ—Å–ª–∏ –æ–Ω –∏–º–µ–µ—Ç `server_idle_timeout`)
  
üìå –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

- –ï—Å–ª–∏ `idleTimeout` —Å—Ç–æ–∏—Ç 10 –º–∏–Ω—É—Ç, –∞ PGbouncer –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç (`server_idle_timeout = 300`), —Ç–æ –±–µ–∑ `keepaliveTime HikariCP` –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å "–º—ë—Ä—Ç–≤—ã–º–∏" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏.
  
–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ:
- **`keepaliveTime < server_idle_timeout`** –≤ PGbouncer (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –º–∏–Ω—É—Ç).
- –¢–æ–≥–¥–∞ `SELECT 1 –æ—Ç HikariCP` –æ—Å–≤–µ–∂–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∏ –æ–Ω–æ –Ω–µ –±—É–¥–µ—Ç —É–±–∏—Ç–æ PGbouncer.

#### 3. `connectionTimeout` (—Å–∫–æ–ª—å–∫–æ –æ–∂–∏–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –µ—Å–ª–∏ –≤—Å–µ –ø—É–ª—ã –∑–∞–Ω—è—Ç—ã –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ)

- –ï—Å–ª–∏ –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –ø—É–ª–µ –∑–∞–Ω—è—Ç—ã, HikariCP –±—É–¥–µ—Ç –∂–¥–∞—Ç—å `connectionTimeout`, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É.
- –ï—Å–ª–∏ **`connectionTimeout`** —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ

üîß –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

–í—ã—Å—Ç–∞–≤–∏—Ç—å **`connectionTimeout`** —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º, —á—Ç–æ–±—ã –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤.


–í –Ω–∞—à–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –∫–∞–∂–¥–æ–π –∏–Ω—Å—Ç–∞–Ω—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–¥–µ—Ç –≤ –ë–î —á–µ—Ä–µ–∑ `pgBouncer` 


- **!–ø—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –ë–î (–±–µ–∑ pgBouncer-a) —á–µ—Ä–µ–∑ –¥–∞—Ç–∞–≥—Ä–∏–ø

### 1. –ü–æ—á–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–µ –≤—Å–µ–≥–¥–∞ 50?

- `HikariCP` –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (minimumIdle, maximumPoolSize).
- `PGbouncer` —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ `transaction` —Ä–µ–∂–∏–º–µ, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –≤—ã–¥–µ–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –Ω–∞ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –≤ –ø—É–ª**.
- –í –ø–µ—Ä–∏–æ–¥—ã –ø—Ä–æ—Å—Ç–æ—è HikariCP –¥–µ—Ä–∂–∏—Ç –º–µ–Ω—å—à–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —á–µ–º **maxPoolSize**.
- –í –ø–µ—Ä–∏–æ–¥—ã –Ω–∞–≥—Ä—É–∑–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `reserve_pool` (—Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `pgbouncer` –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—É–ª (pool_size) –∑–∞–ø–æ–ª–Ω–µ–Ω) –∏–ª–∏ –µ—Å–ª–∏ HikariCP —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

### 2. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è?
–í—ã–ø–æ–ª–Ω–∏ –≤ PostgreSQL:

```sql
SELECT datname, usename, state, count(*) 
FROM pg_stat_activity 
GROUP BY datname, usename, state;
```
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
- –ï—Å–ª–∏ –µ—Å—Ç—å –º–Ω–æ–≥–æ `idle in transaction` - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞—é—Ç
- –ï—Å–ª–∏ `active` —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –º–µ–Ω—å—à–µ, —á–µ–º –æ–∂–∏–¥–∞–ª–æ—Å—å, –∑–Ω–∞—á–∏—Ç, **–ø—É–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–∏–±–∫–æ** –∏ –Ω–µ –¥–µ—Ä–∂–∏—Ç 50 –∫–æ–Ω–Ω–µ–∫—Ç–æ–≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
  
### 3. –ö–∞–∫ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ PGbouncer –Ω–µ –º–µ—à–∞–µ—Ç HikariCP?
–í–∞–∂–Ω–æ, —á—Ç–æ–±—ã `pool_mode` –≤–Ω—É—Ç—Ä–∏ `PGbouncer` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —Ç–æ–º—É, –∫–∞–∫ HikariCP —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏:

- –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å `pool_mode=transaction` –≤ `PgBouncer`, —Ç–æ `HikariCP` –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å `autoCommit=false`, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ

### 4. –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–º–æ—á—å –Ω–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–∞–º?

- !–£–±–µ–¥–∏—Å—å, —á—Ç–æ `HikariCP.maximumPoolSize * –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ ‚â§ default_pool_size` –≤–Ω—É—Ç—Ä–∏ `PGbouncer`
- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pg-bouncer-a –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ `pgbouncer-beta.ini` —Ñ–∞–π–ª–µ –≤ —Å–æ–æ—Ç–≤ –ø—Ä–æ–µ–∫—Ç–µ

----

## –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2

- ! –ï—Å–ª–∏ —É –≤–∞—Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –ø—è—Ç—å
- –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ä—É—à–∞—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø `database per service` (—Ç–∫ `control-api` —Å–æ–∑–¥–∞–µ—Ç `hikari-pool` –¥–ª—è `avtobys-service` –≤ —Å–≤–æ–µ–º –∫–æ–¥–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `ApplicationName=control-api`) - –ø–æ—ç—Ç–æ–º—É –º–∞–∫—Å –∫–æ–ª-–≤–æ –º–æ–∂–µ—Ç –∫–æ–ª–µ–±–∞—Ç—å—Å—è –≤—ã—à–µ 50, –µ—Å–ª–∏ –º—ã –≤ –≥—Ä–∞—Ñ–∞–Ω–µ –¥–µ–ª–∏–º –∫–æ–ª-–≤–æ –∫–æ–Ω–Ω–µ–∫—Ç–æ–≤ –ø–æ `ApplicationName`

<img width="1253" alt="image" src="https://github.com/user-attachments/assets/b1fc157c-b843-4ddb-82dd-e8cddf71ee77" />

