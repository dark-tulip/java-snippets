### Работа с транзакицями на Java

- Прокси в аннотации `@Transactional` нужен для запуска и фиксации транзакции
- Транзакционный метод не может быть вызван в том же объямвленном классе
- транзакции в спринге используют java dynamic proxy
- транзакционных метод откатывается только для рантайм исключений. Для checked исключений оно не работает, так как любая другая исключительная ситуация должна быть явно обработана если она проверяема.
- Note that by default, rollback happens for runtime, unchecked exceptions only. The checked exception does not trigger a rollback of the transaction.

### Нормальные формы - совокупность требований которым должны удовлетворять отношения (relations)
```
1 НФ - каждый атрибут содержит только одно значение (разделение имени и фамилии)
2 НФ - каждый неключевой атрибут потенциально зависит от своего первичного ключа (если ключ составной, зависит от всех его ключей)
3 НФ - отстутствие транзитивных зависимостей (внутри таблицы нет записей которые зависят от другого неключевого атрибута, их можно абстрагировать в отдельную таблицу)
Нормальная форма Бойса Кодда - тот же 3 НФ, только построже, неключевые зависимые атрибуты вынесены в отдельную таблицу
4 НФ - оптимизированная декомпозиция без потерь
5 НФ
6 НФ
```

### ACID - набор требований к транзакции, логичность, целостность и предсказуемость
```
Atomicity - выполнится все или ничего
Consictency - каждая транзакция сохраняет только согласованные и ввалидные данные и фиксирует их (не нарушает логику бизнес правил)
Isolation - уровни изоляции (блокировки)
Durability - устойчивость, (если пользователь осведомлен об успешной транзакции, она действительно должна быть успешной вне аномалий). Мы считаем диск надежным хранилищем.
```


### Isolation levels - проблемы прараллельной работы с данными
```
Read uncomitted - чтение не закомиченых изменений 
Read commit - чтение зафиксированных изменений
Repeatable read - «не видит» изменения данных, которые были ею ранее прочитаны
Serializable -  транзакции полностью изолируются друг от друга
```
Каждый уровень изоляции решает одну из аномалий
```
lost update - два параллельных изменения в одну таблицу, применится последенее остальные потеряются
dirty read - грязное чтение - чтение данных, измененных транзакцией которые впоследствии не подтвердятся
non-repeatable read - неповторяющееся чтение - при повторном чтении данные измменены другой транзакцией, неприемлимо когда данные считываются для частичного изменения (update / delete)
fantom read - одна и та же выборка дает разное кол-во строк (изза вставки) в рамках одной транзакции
```
```
docker-compose stop
docker-compose ps
```
- While Docker Compose is about creating and starting one or multiple containers, 
- Kubernetes serves more as a platform to create a network where we can orchestrate containers.
